---
title: "Lakers Ticket Sales: 2010-2022"
author: "Christian Alfano, Simone Sullivan, Holden Flynn"
date: "`r format(Sys.time(), '%B %d, %Y')`"
geometry: margin=1in
output:
  pdf_document:
    extra_dependencies: ['amsmath']
---

```{r setup, echo=FALSE, warning=FALSE, message=FALSE}
# This code sets up everything for the rest of the document
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)
library(ggplot2)
library(dplyr)
library(tidyr)
library(scales)
library(stargazer)
```

## Equation

$y=ax^2 + bx + c$, where "a" cannot equal 0

$$
f(x) = 34.3^2 + 7.9x -0.3
$$

### Coefficients

$a: 34.318604395604396$ (Quadratic Coefficient): - This coefficient determines the curvature of the parabola. A negative value (as in this case) means the parabola opens downwards. It indicates that the ticket sales increase up to a certain point and then start to decrease as the year increases further. The magnitude of $a$ affects how "sharp" or "flat" the curve is.

$b: 7.8816$ (Linear Coefficient): - This coefficient is associated with the linear term x. It influences the slope of the curve and, in combination with $a$, determines the location of the vertex (the highest or lowest point of the parabola). The value of b affects how steeply the sales rise or fall each year before reaching the turning point.

$c:-0.2722$ (Constant Term): - This is the constant term or the y-intercept. It represents the estimated ticket sales when x(the year) is zero. In the context of this model, it doesn't have a direct interpretative meaning since the year zero is far outside the range of our data. In summary, these coefficients together shape the quadratic curve that best fits the given data on Lakers ticket sales from 2010 to 2022, reflecting how sales vary with time within this period.

```{r data}
# Read data from CSV file
# This is fake sample data. Find your own data.
data <- read.csv("data/LakersTicketData.csv")
```

\newpage

# Data Summary

```{r summary}
# Display a summary of the data
knitr::kable(summary(data))
```

# Regression Analysis

```{r regression, results='asis'}
# regression

data$year2 <- data$year^2

model <- lm(sales ~ year + year2, data=data)

# Add 'fit', 'lwr', and 'upr' columns to data (generated by predict)
data.predict <- cbind(data, predict(model, interval = "confidence"))


# Summary of the model
stargazer(model, type="latex", header=FALSE)
```

\newpage

# Data Visualization

The analysis of Lakers ticket sales between the year 2010 and 2022 reveals distinctive trends influenced by a variety of factors including team performance, player popularity, economic conditions, and COVID-19.

Key Findings: Ticket sales increased from 2010 to 2015. Within those six years, ticket sales reached their peak in 2015 with 99 million tickets sold. The stretch of increasing sales in this data set begins right after the Lakers won the NBA finals in 2009 and 2010. During this period the Lakers had key players such as Kobe Bryant that increased sales and attracted fans to the stadium. They lost the Western conference semifinals in 2011 and 2012 followed by loosing the first round of the Western Conference in 2013 which caused a decrease in ticket sales those years. After 2010, the Lakers fell out of playoffs between the years 2014 through 2019. The data within this period shows fluctuating ticket sales which can most likely be attributed to poor team performance, lack of fan engagement, and slowed economic growth. However, in 2018 ticket sales reached an all time high of 104 million which can be largely attributed to LeBron James signing on that year. Additionally, the Lakers were also losing post game profits which they were previously attaining from 2010 to 2015. Going into 2020, the Lakers won the NBA finals, but due to COVID-19 their profits hit an all time low of 10 million. This is the lowest profit reported between the years of 2010 and 2022. From 2021 to 2022, the Lakers were recovering from the pandemic but reached 102 million in sales in 2021. This is most likely due to newly lifted pandemic restrictions, player popularity, and coming off of a 2020 finals win. Profits remained relatively high in 2022 with 99 million in sales.

Quadratic Analysis: A quadratic regression was used considering the data captures a parabolic shape. Quadratic regressions are more flexible than linear in that they can accommodate curved patterns without added complexity making it the most suitable choice for analyzing ticket sales data.

```{r plot, fig.cap="Data of 2010-2022 Data", fig.align="center", fig.width=6, fig.height=4}
# Graph of data, where x is years and y is sales
ggplot(data, aes(x=year, y=sales)) +
	# Real data
	geom_point() +
  scale_x_continuous(breaks = scales::pretty_breaks(n = 10), limits = c(min(data$year), max(data$year)))+
  
	# Regression lines
	geom_line(data=data.predict, aes(x=year, y=fit), color="limegreen") +
	# Confidence intervals
	geom_ribbon(data=data.predict, aes(x=year, ymin=lwr, ymax=upr), alpha=0.2, fill="limegreen") +
	# Labels
	labs(x="Year", y="Sales") +
  
	# Theme
	theme_bw()
```
